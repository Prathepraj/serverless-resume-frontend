<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Serverless Resume Generator:::::::::::!!!</title>
    <link rel="stylesheet" href="style.css"> 
    <style>
        /* Basic styles for clarity */
        body { font-family: Arial, sans-serif; padding: 20px; }
        .template-buttons button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .resume-form textarea, .resume-form input { margin-bottom: 10px; }
    </style>
</head>
<body>
    <div id="content-container">
        
        <h1>Choose a Resume Template</h1>
        
        </div>

    <script src="/amplify.min.js"></script>
    
    <script src="/script.js"></script>

    <script>
        // Check for the Amplify object
        if (typeof Amplify !== 'undefined') {
            
            // Configuration must be defined before calling checkAuthStatus
            const amplifyConfig = {
                Auth: {
                    region: 'eu-north-1',
                    userPoolId: 'eu-north-1_otaYWhBnF',
                    userPoolWebClientId: '2ic0m094ag96r8jimm81m0oflh',
                    domain: 'eu-north-1otaywhbnf.auth.eu-north-1.amazoncognito.com', 
                    redirectSignIn: 'https://serverless-resume-frontend.vercel.app/', 
                    redirectSignOut: 'https://serverless-resume-frontend.vercel.app/',
                    responseType: 'code' 
                }
            };

            Amplify.configure(amplifyConfig);
            console.log("Amplify configured successfully (Inline & Forced).");
            
            // Force the authentication check, which initiates redirect if not logged in
            checkAuthStatus(); 
         
            document.addEventListener('DOMContentLoaded', () => {
                showPreview(1);
            });
        } else {
            console.error("FATAL ERROR: Amplify object remains undefined. Check Vercel deployment.");
            // If Amplify is missing, we can't do anything, but the API message shouldn't be showing.
        }
    </script>
    
</body>
</html>